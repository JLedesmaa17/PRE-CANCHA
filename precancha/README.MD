# âš½ PRE-CANCHA - Sistema de GestiÃ³n de Reservas

Sistema digital centralizado para la gestiÃ³n y reserva de canchas de fÃºtbol, diseÃ±ado para optimizar la organizaciÃ³n de reservas, horarios disponibles y la comunicaciÃ³n entre usuarios y administradores.

## ğŸ¯ CaracterÃ­sticas Principales

### Para Usuarios
- âœ… Registro e inicio de sesiÃ³n
- ğŸ“… VisualizaciÃ³n de canchas disponibles
- â° Calendario interactivo de reservas
- ğŸ« GestiÃ³n de mis reservas
- ğŸ’³ Consulta de precios en tiempo real

### Para Administradores
- ğŸ“Š Panel de administraciÃ³n completo
- âœ… Aprobar/Rechazar solicitudes de reserva
- ğŸ”„ Sugerencias automÃ¡ticas de horarios alternativos
- ğŸ“ˆ Historial de actividades
- ğŸ‘¥ GestiÃ³n de usuarios

## ğŸš€ InstalaciÃ³n

### Requisitos Previos
- PHP 7.4 o superior
- MySQL 5.7 o superior
- Servidor web (Apache/Nginx)
- Extensiones PHP: PDO, pdo_mysql

### Paso 1: Clonar/Descargar el Proyecto
```bash
# Si usas Git
git clone [URL_DEL_REPOSITORIO]

# O descarga el ZIP y extrae en tu servidor web
```

### Paso 2: Configurar la Base de Datos

1. Crear la base de datos:
```sql
CREATE DATABASE precancha CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

2. Importar el esquema:
```bash
mysql -u root -p precancha < Pagina/sql/schema.sql
```

O desde phpMyAdmin:
- Selecciona la base de datos `precancha`
- Ve a "Importar"
- Selecciona el archivo `Pagina/sql/schema.sql`
- Haz clic en "Continuar"

### Paso 3: Configurar la ConexiÃ³n

Edita el archivo `Pagina/config/database.php`:

```php
private $host = 'localhost';      // Tu host de MySQL
private $dbname = 'precancha';    // Nombre de la base de datos
private $username = 'root';        // Tu usuario de MySQL
private $password = '';            // Tu contraseÃ±a de MySQL
```

### Paso 4: Configurar el Servidor Web

#### Apache (.htaccess)
```apache
RewriteEngine On
RewriteBase /

# Redirigir todo a index.php si el archivo no existe
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [QSA,L]
```

#### Nginx
```nginx
location / {
    try_files $uri $uri/ /index.php?$query_string;
}
```

### Paso 5: Permisos (Linux/Mac)
```bash
chmod -R 755 Pagina/
chmod -R 777 Pagina/uploads/  # Si tienes carpeta de uploads
```

## ğŸ‘¤ Usuarios por Defecto

DespuÃ©s de importar la base de datos, tendrÃ¡s un usuario administrador:

**Administrador:**
- Email: `admin@precancha.com`
- ContraseÃ±a: `admin123`

âš ï¸ **IMPORTANTE**: Cambia esta contraseÃ±a inmediatamente despuÃ©s del primer inicio de sesiÃ³n.

## ğŸ“ Estructura del Proyecto

```
Pagina/
â”œâ”€â”€ admin/              # Panel de administraciÃ³n
â”‚   â””â”€â”€ index.php
â”œâ”€â”€ api/                # Endpoints de la API
â”‚   â””â”€â”€ reservas.php
â”œâ”€â”€ config/             # Configuraciones
â”‚   â””â”€â”€ database.php    # ConexiÃ³n a BD
â”œâ”€â”€ includes/           # Archivos auxiliares
â”‚   â””â”€â”€ auth.php        # Sistema de autenticaciÃ³n
â”œâ”€â”€ sql/                # Scripts SQL
â”‚   â””â”€â”€ schema.sql      # Esquema de la base de datos
â”œâ”€â”€ usuario/            # Panel de usuario
â”‚   â””â”€â”€ mis-reservas.php
â”œâ”€â”€ index.php           # PÃ¡gina principal
â”œâ”€â”€ login.php           # Inicio de sesiÃ³n
â”œâ”€â”€ registro.php        # Registro de usuarios
â”œâ”€â”€ reservas.php        # Sistema de reservas
â”œâ”€â”€ logout.php          # Cerrar sesiÃ³n
â””â”€â”€ README.md           # Este archivo
```

## ğŸ”§ ConfiguraciÃ³n Adicional

### Configurar Email (Opcional)
Para habilitar notificaciones por email, edita la tabla `configuracion`:

```sql
UPDATE configuracion 
SET valor = 'true' 
WHERE clave = 'notificaciones_email';
```

### Agregar Nuevas Canchas
Desde phpMyAdmin o tu cliente MySQL:

```sql
INSERT INTO canchas (numero, tipo, jugadores, superficie, precio_hora) 
VALUES (6, 'FÃºtbol 7', 14, 'CÃ©sped Natural', 7000.00);
```

## ğŸ“– Uso del Sistema

### Como Usuario

1. **Registrarse**: Ve a `registro.php` y crea tu cuenta
2. **Iniciar SesiÃ³n**: Usa tus credenciales en `login.php`
3. **Reservar**: 
   - Navega a "Canchas" desde el menÃº
   - Selecciona una cancha
   - Elige fecha y horario
   - Completa tus datos
   - EnvÃ­a la solicitud

4. **Mis Reservas**: Consulta el estado de tus reservas en tu panel de usuario

### Como Administrador

1. **Acceder al Panel**: Inicia sesiÃ³n con credenciales de admin
2. **Gestionar Reservas**: 
   - Ve al panel de administraciÃ³n
   - Revisa solicitudes pendientes
   - Aprueba o rechaza con motivo
   - El sistema sugiere horarios alternativos automÃ¡ticamente

## ğŸ”’ Seguridad

- âœ… ContraseÃ±as hasheadas con `password_hash()`
- âœ… Prepared statements para prevenir SQL injection
- âœ… ValidaciÃ³n de sesiones
- âœ… ProtecciÃ³n CSRF bÃ¡sica
- âœ… SanitizaciÃ³n de datos de entrada

## ğŸ› SoluciÃ³n de Problemas

### Error de ConexiÃ³n a la Base de Datos
```
Error: Could not connect to database
```
**SoluciÃ³n**: Verifica las credenciales en `config/database.php`

### PÃ¡gina en Blanco
**SoluciÃ³n**: Habilita el display de errores en PHP:
```php
ini_set('display_errors', 1);
error_reporting(E_ALL);
```

### Sesiones no Funcionan
**SoluciÃ³n**: Verifica que `session_start()` se llame al inicio y que la carpeta de sesiones tenga permisos de escritura.

## ğŸ“Š Base de Datos

### Tablas Principales

- **usuarios**: InformaciÃ³n de usuarios y administradores
- **canchas**: CatÃ¡logo de canchas disponibles
- **reservas**: Todas las reservas del sistema
- **horarios_disponibles**: Horarios de operaciÃ³n
- **bloqueos**: Fechas/horarios bloqueados
- **historial_acciones**: AuditorÃ­a del sistema
- **configuracion**: ParÃ¡metros del sistema

### Backup de la Base de Datos

**Crear backup:**
```bash
mysqldump -u root -p precancha > backup_precancha_$(date +%Y%m%d).sql
```

**Restaurar backup:**
```bash
mysql -u root -p precancha < backup_precancha_20240101.sql
```

## ğŸ”„ Actualizaciones Futuras

Funcionalidades planeadas para futuras versiones:
- [ ] IntegraciÃ³n con pagos online (Mercado Pago, Stripe)
- [ ] Notificaciones por WhatsApp
- [ ] App mÃ³vil nativa
- [ ] Sistema de puntos y descuentos
- [ ] Reservas recurrentes
- [ ] Reportes y estadÃ­sticas avanzadas

## ğŸ“ Soporte

Para consultas o problemas:
- Email: info@precancha.com
- TelÃ©fono: +54 11 1234-5678

## ğŸ“„ Licencia

Este proyecto fue desarrollado para [NOMBRE DEL CLIENTE].
Todos los derechos reservados Â© 2024

## ğŸ‘¨â€ğŸ’» Desarrollador

Desarrollado con â¤ï¸ por [JuliÃ¡n]
Contacto: [trollledes6@email.com]

---

**Ãšltima actualizaciÃ³n**: Diciembre 2024
**VersiÃ³n**: 1.0.0